{% extends "food/base.html" %}
{% load static %}

{% block title %}
FoodBox | Orders
{% endblock %}

{% block body %}
  <h1 class="my-3" id="f1">My Orders</h1>
  {% if phoneNumber %}
    <p>Phone Number: +91 {{ phoneNumber }}</p>
  {% else %}
    <div class="alert alert-warning" role="alert">
      <a class="alert-link" href="{% url 'phoneNumber' %}">Confirm your phone number to order!</a>
    </div>
    <p></p>
  {% endif %}

  {% if deliveringOrders %}
    <h2>Delivering Orders</h2>
    {% for order in deliveringOrders %}
      <div class="card border-danger" style="margin-bottom: 20px">
        <div class="card-body">
          <h5 class="card-title">{{ order.restaurant.name}} Order #{{ order.id }}</h5>
          <h6 class="card-subtitle mb-2">Price: &#8377; <span class="text-success">{{ order.totalPrice }}</span></h6>
            <h6 class="card-subtitle mb-2 text-muted">Delivering to {{ order.address }}</h6>
          <p class="card-text">
            <ul class="list-group list-group-flush">
              {% for item in order.items.all %}
                  <li class="list-group-item">{{ item.menuItem.name }} &#8377; {{ item.menuItem.price }} x{{ item.count }}</li>
              {% endfor %}
            </ul>
          </p>
          <a href="{% url 'restaurant' order.restaurant.id %}" class="card-link">Restaurant page</a>
        </div>
      </div>
    {% endfor %}
  {% endif %}

  {% if pendingOrders %}
    <h2>Pending Orders</h2>
    {% for order in pendingOrders %}
      <div class="card border-warning" style="margin-bottom: 20px">
        <div class="card-body">
          <h5 class="card-title">{{ order.restaurant.name}} Order #{{ order.id }}</h5>
          <h6 class="card-subtitle mb-2">Price: &#8377; <span class="text-success">{{ order.totalPrice }}</span></h6>
          <h6 class="card-subtitle mb-2 text-muted">Delivering to {{ order.address }}</h6>
          <p class="card-text">
            <ul class="list-group list-group-flush">
              {% for item in order.items.all %}
                  <li class="list-group-item">{{ item.menuItem.name }} &#8377; {{ item.menuItem.price }} x{{ item.count }}</li>
              {% endfor %}
            </ul>
          </p>
          <a href="{% url 'restaurant' order.restaurant.id %}" class="card-link">Restaurant page</a>
          <a href="#" class="card-link">Cancel</a>
        </div>
      </div>
    {% endfor %}
  {% endif %}

  {% if deliveredOrders %}
    <h2>Finished Orders</h2>
    {% for order in deliveredOrders %}
      <div class="card" style="margin-bottom: 20px">
        <div class="card-body">
          <h5 class="card-title">{{ order.restaurant.name}} Order #{{ order.id }}</h5>
          <h6 class="card-subtitle mb-2">Price: &#8377; <span class="text-success">{{ order.totalPrice }}</span></h6>
          <h6 class="card-subtitle mb-2 text-muted">Delivering to {{ order.address }}</h6>
          <p class="card-text">
            <ul class="list-group list-group-flush">
              {% for item in order.items.all %}
                  <li class="list-group-item">{{ item.menuItem.name }} &#8377; {{ item.menuItem.price }} x{{ item.count }}</li>
              {% endfor %}
            </ul>
          </p>
          <a href="{% url 'restaurant' order.restaurant.id %}" class="card-link">Restaurant page</a>
        </div>
      </div>
    {% endfor %}
  {% endif %}

  {% if choosingOrders %}
    <h2>Go back to your current orders</h2>
    {% for order in choosingOrders %}
      <div class="card border-info" style="margin-bottom: 20px">
        <div class="card-body">
          <h5 class="card-title">{{ order.restaurant.name}} Order #{{ order.id }}</h5>
          <h6 class="card-subtitle mb-2">Price: &#8377; <span class="text-success">{{ order.totalPrice }}</span></h6>
          {% if order.address %}
            <h6 class="card-subtitle mb-2 text-muted">Delivering to {{ order.address }}</h6>
          {% endif %}
          <p class="card-text">
            <ul class="list-group list-group-flush">
              {% for item in order.items.all %}
                  <li class="list-group-item">{{ item.menuItem.name }} &#8377; {{ item.menuItem.price }} x{{ item.count }}</li>
              {% endfor %}
            </ul>
          </p>
          <a href="{% url 'restaurant' order.restaurant.id %}" class="card-link">Restaurant page</a>
        </div>
      </div>
    {% endfor %}
  {% endif %}


  <!--
  <h3 class="my-3" id="f1">Your orders</h3>
  <div class="row">
    <div class="col-12 col-lg-3">
      <div class="card border-0 account-card card-active my-2" onclick="window.location.href = '#'">
        <div class="card-body py-2">
          <i class="fas fa-user-circle"></i> My details
        </div>
      </div>
      <div class="card border-0 my-2 account-card" onclick="window.location.href = '#'">
        <div class="card-body py-2">
          <i class="fas fa-signature"></i> Signed petitions
        </div>
      </div>
      <div class="card border-0 my-2 account-card" onclick="window.location.href = '#'">
        <div class="card-body py-2">
          <i class="fas fa-file-contract"></i> My petitions
        </div>
      </div>
    </div>
  </div>
  -->

  <!--<nav class="d-block d-lg-none navbar fixed-bottom navbar-expand-lg navbar-light bg-light">
    <div class="container">
    <a class="navbar-brand font-weight-bold" href="{% url 'index' %}" id="logo">Filter</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#res_filter" aria-controls="res_filter" aria-expanded="false" aria-label="Toggle navigation">
      <span><i class="fa fa-filter" aria-hidden="true"></i></span>
    </button>

    <div class="collapse navbar-collapse" id="res_filter">
      <div id="mob_filters">
      {% for cui in cuisine %}
        <div class="my-n1 d-flex justify-content-between checkbox">
          <label class="my-auto" for="filter-{{ cui.name }}">{{ cui.name }}</label><input id="filter-{{ cui.name }}" class="my-auto" type="checkbox" value="{{ cui.name }}"/>
        </div>
      {% endfor %}
      </div>
    </div>
    </div>
  </nav>-->

{% endblock %}
